<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>스터디 관리</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/member/mypage.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">

</head>
<body>

<div data-th-replace="header :: header">머리말</div>

<div id="sidenav" class="sidenav">
  <a data-th-href="@{${#session.getAttribute('loginUser') != null ? '/member/dashboard?no=' + #session.getAttribute('loginUser').memberNo : '/auth/login'}}" href="">대시보드</a>
  <div data-th-if="${session.loginUser != null}">
  <a data-th-href="@{'/member/mystudy?no=' + ${session.loginUser.memberNo}}" href="">My 스터디</a>
  <a data-th-href="@{/member/edit}" href="">회원 정보 수정</a>
  </div>
</div>

<form action="update" data-th-action="@{/member/update}" data-th-object="${member}"
      enctype='multipart/form-data'
      method='post'>

<div class="container-profile">
  <div id="profile">
    <div class="rounded">
      <a data-th-href="@{'https://kr.object.ncloudstorage.com/mos/member/' + *{photo}}"
         data-th-if="*{photo}">
        <img class="rounded-circle" data-th-src="@{'https://kr.object.ncloudstorage.com/mos/member/' + *{photo}}"></a><br>
      <a data-th-unless="*{photo}" href='/img/user2-160x160.jpg'>
        <img class="rounded-circle" height='80px' src='/img/user2-160x160.jpg'></a><br>
      <input name='memberPhoto' type='file'>
    </div>
   </div>
  <div>
    이메일: <input data-th-value='*{email}' name='email' readonly type='text' value="user1@test.com">
  </div>
  <div>
    닉네임: <input data-th-value='*{userName}' name='username' type='text' value="user1">
  </div>
  <div>
    경력: <input data-th-value='*{career}' name='career' type='text' value="풀스택 개발자">
  </div>
  <div>
    소속: <input data-th-value='*{belong}' name='belong' type='text' value="아이티크라우드">
  </div>
  <div>
    바이오: <input data-th-value='*{biography}' name='biography' type='text' value="안녕하세요.">
  </div>
  <div>
    소셜링크: <input data-th-value='*{socialLink}' name='socialLink' type='text' value="facebook">
  </div>
  <div>
    <button type="submit">수정</button>
    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#withdrawalModal">탈퇴</button>
  </div>
  </div>
</form>

<!-- 모달 창 -->
<div class="modal fade" id="withdrawalModal" tabindex="-1" aria-labelledby="withdrawalModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="withdrawalModalLabel">회원 탈퇴</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>정말로 회원 탈퇴를 진행하시겠습니까?</p>
        <p>탈퇴 시, 계정과 관련된 모든 권한이 사라지며 복구할 수 없습니다.</p>
        <p>직접 작성한 콘텐츠(위키, 게시물, 댓글 등)는 자동으로 삭제되지 않으며, 만일 삭제를 원하시면 탈퇴 이전에 삭제가 필요합니다.</p>
        <p>탈퇴 후 연동된 소셜 계정 정보도 사라지며 소셜 로그인으로 기존 계정 이용이 불가능합니다.</p>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
        <form action="withdraw" data-th-action="@{/member/withdraw}" data-th-object="${member}" method="post">
          <button type="submit" class="btn btn-danger">탈퇴하기</button>
        </form>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"></script>


</body>
</html>